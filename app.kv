#:import Factory kivy.factory.Factory
Manager:
	LoginScreen:
		name: 'log'
	RegisterScreen:
		name: 'reg'
	BookScreen:
		name: 'book'

<BookScreen>:
	pos: root.pos
	size: root.size
	GridLayout:
		cols: 2
		padding: 25
		spacing: 15
		cols_minimum: {0: 400, 1: 100}
		AddrTable:
			Label:
				canvas:
					Color:
						rgba: 1,1,1,1111111 
					Rectangle:
						pos: self.parent.pos
						size: self.parent.size
		BoxLayout:
			orientation: 'vertical'
			Button:
				text: 'Add contact'
				on_release: root.add_contact()
			Button:
				text: 'Remove contact'
				on_release: root.remove_contact()
			Button:
				text: 'Change contact'
				on_release: root.change_contact()
			Button:
				text: 'Logout'
				on_release: app.root.current = 'log'

<RegisterScreen>:
	GridLayout:
		cols: 2
		Label:
			canvas.before:
				Color:
					rgba: 0.2,0.2,0.7,1
				Rectangle:
					pos: self.pos
					size: self.size
			text_size: self.size
			halign: 'right'
			color: 1, 1, 0, 1
			size_hint_y: None
			height: 50
			font_size: 30
			text: 'Choose user name: '
		TextInput:
			id: user_name
			size_hint_y: None
			height: 50
			font_size: 20
			multiline: False
			text: 'user id'
		Label:
			canvas.before:
				Color:
					rgba: 0.2,0.2,0.7,1
				Rectangle:
					pos: self.pos
					size: self.size
			text_size: self.size
			halign: 'right'
			color: 1, 1, 0, 1
			size_hint_y: None
			height: 50
			font_size: 30
			text: 'Password: '
		TextInput:
			id: password1
			size_hint_y: None
			height: 50
			font_size: 20
			password: True
			multiline: False
			text: ''
		Label:
			canvas.before:
				Color:
					rgba: 0.2,0.2,0.7,1
				Rectangle:
					pos: self.pos
					size: self.size
			text_size: self.size
			halign: 'right'
			color: 1, 1, 0, 1
			size_hint_y: None
			height: 50
			font_size: 30
			text: 'Retype password: '
		TextInput:
			id: password2
			size_hint_y: None
			height: 50
			font_size: 20
			password: True
			multiline: False
			text: ''
	Button:
		center: root.center
		color: 0,0,1,1
		font_size: 35
		size_hint: None, None
		width: 200
		height: 75
		background_normal: ''
		background_color: 0.2,0.7,0.4,0.8
		text: 'Submit'
		on_press: root.register(user_name.text, password1.text, password2.text)
<LoginScreen>:
	GridLayout:
		size_hint: None, None
		center: self.parent.center
		size: root.width * 0.8, self. height
		cols: 2
		Label:
			canvas.before:
				Color:
					rgba: 0.2,0.2,0.7,1
				Rectangle:
					pos: self.pos
					size: self.size
			text_size: self.size
			halign: 'right'
			color: 1, 1, 0, 1
			size_hint: None, None
			width: 200
			height: 50
			font_size: 30
			text: 'Login: '
		TextInput:
			id: login
			size_hint_y: None
			height: 50
			font_size: 20
			multiline: False
			text: 'user id'

		Label:
			canvas.before:
				Color:
					rgba: 0.2,0.2,0.7,1
				Rectangle:
					pos: self.pos
					size: self.size
			text_size: self.size
			halign: 'right'
			color: 1, 1, 0, 1
			size_hint: None, None
			width: 200
			height: 50
			font_size: 30
			text: 'Password: '
		TextInput:
			id: password
			size_hint_y: None
			height: 50
			font_size: 20
			password: True
			multiline: False
			text: 'Type password'

		Button:
			color: 0,0,1,1
			font_size: 35
			size_hint: None, None
			width: 200
			height: 75
			background_normal: ''
			background_color: 0.2,0.7,0.4,0.8
			text: 'Register'
			on_press: root.register()
			on_release: app.root.current = 'reg'
		Button:
			color: 0,1,0,1
			font_size: 40
			size_hint: 1, None
			height: 75
			background_normal: ''
			background_color: 0.2,0.4,0.6,0.8
			text: 'Sign in >>> '
			on_release: root.sing_in(login.text, password.text)

<UserExists@Popup>:
	title: 'Error'
	size_hint: 0.5, None
	height: 150
	text: 'lol'
	Label:
		size_hint: 1, None
		font_size: 32
		text: 'Choose other login'

<AddContact@Popup>:
	title: 'Add new contact'
	title_align: 'center'
	title_size: 20
	size_hint: 0.7, 0.7
	ContactForm:

<ContactForm>:
	GridLayout:
		pos: self.parent.pos
		size: self.parent.size
		cols: 2
		Label:
			text: 'Name:'
		TextInput:
			multiline: False
		Label:
			text: 'Second name:'
		TextInput:
			multiline: False
		Label:
			text: 'E-mail:'
		TextInput:
			multiline: False
		Label:
			text: 'Phone:'
		TextInput:
			multiline: False
		Label:
		Button:
			text: 'Submit'
			on_release: pass

